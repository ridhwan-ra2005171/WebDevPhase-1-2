// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator dbml {
  provider = "prisma-dbml-generator"
}

model Institution {
  instituteID Int     @id @default(autoincrement())
  code        String
  name        String
  country     String
  papers      Paper[]
}

model Location {
  locationID Int       @id @default(autoincrement())
  building   String
  room       String
  sessions   Session[]
}

model Paper {
  paperID     Int         @id @default(autoincrement())
  title       String
  abstract    String
  authors     User[]      @relation("PaperAuthors")
  presenterID Int?
  pdfLink     String
  reviews     Review[]
  session     Session?    @relation(fields: [sesID], references: [sesID])
  sesID       Int?
  institutes   Institution @relation(fields: [instituteID], references: [instituteID])
  instituteID Int
}

model Session {
  sesID       Int      @id @default(autoincrement())
  title       String
  location    Location @relation(fields: [locationID], references: [locationID])
  locationID  Int
  presenter   User     @relation("PresenterSessions", fields: [presenterID], references: [id])
  presenterID Int
  fromTime    DateTime
  endTime     DateTime
  schedule    Schedule @relation(fields: [schID], references: [schID], onDelete: Cascade)
  schID       Int
  papers      Paper[]
}

model Review {
  reviewID          Int    @id @default(autoincrement())
  overallEvaluation Int
  paperContribution Int
  paperStrength     String
  paperWeaknesses   String
  paper             Paper  @relation(fields: [paperID], references: [paperID])
  paperID           Int
  user User @relation(fields: [reviewerID], references: [id], onDelete: Cascade)
  reviewerID Int

}

model Schedule {
  schID    Int       @id @default(autoincrement())
  date     DateTime
  sessions Session[]
}

model User {
  id                Int       @id @default(autoincrement())
  first_name        String
  last_name         String
  email             String    @unique
  password          String
  role              String
  authoredPapers    Paper[]   @relation("PaperAuthors")
  presentedSessions Session[] @relation("PresenterSessions")
  reviews Review[]
}

// model ConferenceDates {
//   dateID   Int    @id @default(autoincrement())
//   confDate String
// }
